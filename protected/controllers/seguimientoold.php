
<!--div class="pane ui-layout-north">North</div-->


<div class="pane ui-layout-center">
	<!--<div style="width: 50%; height: 100%; float:left" id="grafico1"></div>
	<div style="width: 50%; height: 100%; float:right" >
		
		<div id="grafico2" style ="height: 100%"></div>-->
	
	
 <div class="row">
   <div class="col-md-12" >
	<div id="popup" >
			<!--a href="#" id="popup-closer" class="ol-popup-closer"></a-->
		<div id="popup-content2">
			<div id="tabs2">
											
								
				<div id="tabs2-1">	
								    
											<!--<div id="map" style="width:100%; height:80%"></div>		-->	
										<div class="row">
											<div class="col-md-8" >
												<div id="grafico80"></div>
											</div>
											<div class="col-md-4" >
												<div id="grafico80_A"></div>
											</div>
										</div>	
										
										<div class="row">
											<div class="col-md-8" >
												<div id="graficoS80"></div>
											</div>
											<div class="col-md-4" >
												<div id="graficoS80_A"></div>
											</div>
										</div>	
										
										<div class="row">
											
											<div class="col-md-3">
													<div id="grafico90"></div>
											</div>

											<div class="col-md-3">
											    <div id="grafico91"></div>	
											</div>
											<div class="col-md-2">
											    <h4 id="Titulo92" width="100%" class="p-3 mb-2 bg-danger   text-white  ".bg-success></h4>
												<!--<div id="grafico92"></div>-->
												<div class="table">
													<table id="grafico92" class="table-striped bg-danger text-white" ></table>
												</div>
											</div>
											<div class="col-md-2">
											    <h4 id="Titulo93" width="100%" class="p-3 mb-2 bg-danger   text-white  ".bg-success></h4>
												<!--<div id="grafico92"></div>-->
												<div class="table">
													<table id="grafico93" class="table-striped bg-danger text-white" ></table>
												</div>
											</div>
											<div class="col-md-2">
											    <h4 id="Titulo94" width="100%" class="p-3 mb-2 bg-danger   text-white  ".bg-success></h4>
												<!--<div id="grafico92"></div>-->
												<div class="table">
													<table id="grafico94" class="table-striped bg-danger text-white" ></table>
												</div>
											</div>
											<
										</div>

										
										<div class="row">
											
											<div class="col-md-3" >
												<div id="grafico100"></div>
											</div>
											<div class="col-md-3">
											    <div id="grafico101"></div>	
											</div>
											<div class="col-md-2">
											    <h4 id="Titulo102" width="74%" class="p-3 mb-2 bg-danger   text-white  ".bg-success></h4>
												<!--<div id="grafico92"></div>-->
												<div class="table">
													<table id="grafico102" class="table-striped bg-danger text-white" ></table>
												</div>
											</div>
											<div class="col-md-2">
											    <h4 id="Titulo103" width="74%" class="p-3 mb-2 bg-danger   text-white  ".bg-success></h4>
												<!--<div id="grafico92"></div>-->
												<div class="table">
													<table id="grafico103" class="table-striped bg-danger text-white" ></table>
												</div>
											</div>
											<div class="col-md-2">
											    <h4 id="Titulo104" width="74%" class="p-3 mb-2 bg-danger   text-white  ".bg-success></h4>
												<!--<div id="grafico92"></div>-->
												<div class="table">
													<table id="grafico104" class="table-striped bg-danger text-white" ></table>
												</div>
											</div>
											<
										</div>

											<div class="row">
											<div class="col-md-1" >
												<div id="graficoT80"></div>
											</div>
											<div class="col-md-4" >
												<div id="graficoT80_A"></div>
											</div>
										</div>	


										<div class="row">
											
											<div class="col-md-3">
													<div id="graficoS90"></div>
											</div>

											<div class="col-md-3">
											    <div id="graficoS91"></div>	
											</div>
											<div class="col-md-2">
											    <h4 id="TituloS92" width="100%" class="p-3 mb-2 bg-danger   text-white  ".bg-success></h4>
												<!--<div id="grafico92"></div>-->
												<div class="table">
													<table id="graficoS92" class="table-striped bg-danger text-white" ></table>
												</div>
											</div>
											<div class="col-md-2">
											    <h4 id="TituloS93" width="100%" class="p-3 mb-2 bg-danger   text-white  ".bg-success></h4>
												<!--<div id="graficoS92"></div>-->
												<div class="table">
													<table id="graficoS93" class="table-striped bg-danger text-white" ></table>
												</div>
											</div>
											<div class="col-md-2">
											    <h4 id="TituloS94" width="100%" class="p-3 mb-2 bg-danger   text-white  ".bg-success></h4>
												<!--<div id="grafico92"></div>-->
												<div class="table">
													<table id="graficoS94" class="table-striped bg-danger text-white" ></table>
												</div>
											</div>
											<
										</div>

										
										<div class="row">
											
											<div class="col-md-3" >
												<div id="graficoS100"></div>
											</div>
											<div class="col-md-3">
											    <div id="graficoS101"></div>	
											</div>
											<div class="col-md-2">
											    <h4 id="TituloS102" width="74%" class="p-3 mb-2 bg-danger   text-white  ".bg-success></h4>
												<!--<div id="grafico92"></div>-->
												<div class="table">
													<table id="graficoS102" class="table-striped bg-danger text-white" ></table>
												</div>
											</div>
											<div class="col-md-2">
											    <h4 id="TituloS103" width="74%" class="p-3 mb-2 bg-danger   text-white  ".bg-success></h4>
												<!--<div id="grafico92"></div>-->
												<div class="table">
													<table id="graficoS103" class="table-striped bg-danger text-white" ></table>
												</div>
											</div>
											<div class="col-md-2">
											    <h4 id="TituloS104" width="74%" class="p-3 mb-2 bg-danger   text-white  ".bg-success></h4>
												<!--<div id="grafico92"></div>-->
												<div class="table">
													<table id="graficoS104" class="table-striped bg-danger text-white" ></table>
												</div>
											</div>
											<
										</div>
										
										
										
										<div class="row">
											
											
											<div class="col-md-5" id="panel1-1">
											    <h4 id="Titulo0" width="74%"  class="p-3 mb-2 bg-danger text-white".bg-success></h4>
												<h5 id="pobEdad0"></h5>
												<h5 id="pobEdad1"></h5>
												<h5 id="pobEdad2"></h5>
												<h5 id="pobEdad3"></h5>
												<h5 id="pobEdad4"></h5>
												<div id="loadingInfoEdad"></div>
												<div id="infoEdad" style="width:auto;"></div>
												
												<h4 id="Titulo1" width="74%" class="p-3 mb-2 bg-danger   text-white  ".bg-success></h4>
												<div id="loadingTablaCorta"></div>
												<div class="table">									
														<table id="infoTablaCorta" class="table-striped bg-danger text-white "></table>
												</div>
												
												<h4 id="Titulo2" width="74%" class="p-3 mb-2 bg-danger   text-white  ".bg-success></h4>
												<div id="loadingTablaLarga"></div>
												<div class="table">
															<table id="infoTablaLarga" class="table-striped bg-danger text-white" ></table>
												</div>
												<h4 id="Titulo3" width="74%"  class="p-3 mb-2 bg-danger text-white".bg-success></h4>
												<div id="loadingTablaLarga2"></div>
												<div class="table">
															<table id="infoTablaLarga2" class="table-striped bg-danger text-white"></table>
												</div>
												<h4 id="Titulo4" width="74%" class="p-3 mb-2  bg-danger text-white  ".bg-success></h4>
												<div id="loadingTablaLarga3"></div>
												<div class="table">
															<table id="infoTablaLarga3" class="table-striped bg-danger text-white"></table>
												</div>
											</div>
											
											
											
											<div class="col-md-7">
											    <div id="grafico22"></div>
												<div id="grafico2"></div>
												<div id="grafico21"></div>
												
											</div>
										</div>
										
				</div>


				<div id="tabs2-2">	
									
											<div class="row">
												<div class="col-md-12">
													<div id="container10" style="width:100%; height:100%">
													</div>
											     </div>	
											</div>	
											<div class="row">
												<div class="col-md-12">
													<div id="container11" style="width:100%; height:100%"></div>
												</div>	
											</div>
											<div class="row">
												<div class="col-md-12">
													<div id="container12" style="width:100%; height:300%"></div>
													
										        </div>
										    </div>
											
				</div>		

				<div id="tabs2-3">	
										<div class="row">
												<div class="col-md-6">
													<div id="grafico3" style="width:100%; height:300%"></div>
												</div>
												<div class="col-md-6">
													<div id="grafico4" style="width:100%; height:300%"></div>
												</div>
										</div>
										<div class="row">
												<div class="col-md-12">
													<div id="container13" style="width:100%; height:300%"></div>
													
										        </div>
										    </div>
										<div class="row">
												<div class="col-md-12">
													<div id="container14" style="width:100%; height:300%"></div>
													
										        </div>
										  </div>
		
				</div>
								
			</div>
		</div>
	</div>
   </div>
 </div>
</div>


			
	</div>
</div>
	

</div>
</div>

<div id="popupInfo" class="ol-popup" style="width:400px">
	<a href="#" id="popup-closer-medida" class="ol-popup-closer"></a>
	<div id="popup-content-info">
		<ul></ul>
	</div>
	
</div>
<!--inserta la libreria de cambio de coordenadas
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.4.3/proj4.js"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.4.3/proj4.js"></script>

<script type="text/javascript">

//defino la proyeccoin 32619 que es WGS 84 UTM 19N
//
proj4.defs("EPSG:32619","+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs");


//******************************************
// DEFINICION DE VARIABLES Y EVENTOS
//****************************************++
var groupCapas, groupSociodemo;
var tools = {socio:false};
var cpSelected = [], nacionalidad = ["RESTO", "EUROPA", "ASIA", "AMERICA", "AFRICA"], edades = [{capa:"POB_6599", titulo:"Población > 65"}, {capa:"POB_2965", titulo:"Población 29-65"}, {capa:"POB_2029", titulo:"Población 20-29"}, {capa:"POB_1519", titulo:"Población 15-19"}, {capa:"POB_0514", titulo:"Población 5-14"},{capa:"POB_0005", titulo:"Población 0-5"}];
var iso1, iso2, iso3, iso4, iso5, microcuencas_selected, plantaciones_cuencas_selected, parcelas, arg_cuencas, ensenas, loc = null, idAlcampo, idEncuesta, cuencas, microcuenca, productores_ganaderos,centro_de_acopio,productor_ganadero_seleccionado;
var sel, selLayer, osm, google, google_carto,parcelassel,sal,salid,codigobuscado,solo_plantaciones,dataano,dataespecie,xmed,ymed,xmin,xmax,ymin,ymax;
var comp = [[7,"7.- Híper > 9000"], [6, "6.- Híper 6000-8999"], [5,"5.- Híper 3500-5999"], [4,"4.- Mini Híper 2500-3499"], [3,"3.- Súper 1000-2499"], [2, "2.- Súper 400-999"], [1,"1.- Súper < 400"] ];
var myLayout;
var infoCV;
cuencas =99;
idAlcampo=99;



//**********************************
// EVENTOS
//**********************************




$(document).ready(function () {
	myLayout = $('#content').layout({
		west__size:	'20%',
		east__size:	'35%',
		south__size:'42%',
		east__initClosed: true, 
		onresize: function () {
			map.updateSize();//alert('whenever anything on layout is redrawn.') 
		}	
	});
	
	$( "#butInfo" )
		.button()
		.click(function( event ) {
			//$("#map").css({'cursor': 'url(https://cdn1.iconfinder.com/data/icons/CrystalClear/32x32/actions/contexthelp.png), default'});
			$("#map").css({'cursor': 'pointer'});
			tools.capa = false;
			tools.socio = true;
			//alert ( 'estoy aqui en butInfo');
	});
		
	$( "#tabs" ).tabs();
	
	$( "#butInfoWMS" )
		.button()
		.click(function( event ) {
			$("#map").css({'cursor': 'url(https://cdn1.iconfinder.com/data/icons/CrystalClear/32x32/actions/contexthelp.png), default'});
			//$("#map").css({'cursor': 'url(https://cdn3.iconfinder.com/data/icons/bluecoral/Cursor.png), default'});
			tools.socio = false;
			tools.capa = true;
			//alert ( 'estoy aqui en butInfoWMS');
	});
	
	$( "#butUnselect" )
		.button()
		.click(function( event ) {
			tools.socio = false;
			$("#map").css({'cursor': 'default'});
			cpSelected = [];
			$("#infoEdad").empty();
			$("#infoExtr").empty();
			$("#infoCV").empty();
			$("#totalPob").empty();
			$("#infoPobM").empty();
			$("#infoPobD").empty();
			$("#infoPobS").empty();
			$("#infoCompeEns").empty();
			$("#infoCompeSup").empty();
			var capas = map.getLayers().getArray();
			for(var i = capas.length-1; i>=0; i--){
				var nombre = capas[i].get('name');
				if(nombre == 'Seleccion'){
					map.removeLayer(capas[i]);
				}
			}
		});
			
	//********************************
    //SELECCION DE CUENCAS 
    //********************************	

	
	$('#hiperAlcampo').selectmenu({
		change: function( event, data ) {
			
			idAlcampo = data.item.value;
			idAlcampo = data.item.value;
		
			
			//$('#grafico1').empty();
			//$('#grafico2').empty();
			//$('#seleccion').empty();
	
			//QUITOS ESTO PARA PROBAR CON PLANSIERRA
			//iso1.getSource().setUrl("http://<?php echo Yii::app()->params['servidor'];?>/cgi-bin/mapserv.exe?MAP=c:\\datos/sigma/maps/sigma_3857.map&hiper="+idAlcampo);
			//iso2.getSource().setUrl("http://<?php echo Yii::app()->params['servidor'];?>/cgi-bin/mapserv.exe?MAP=c:\\datos/sigma/maps/sigma_3857.map&hiper="+idAlcampo);
			//iso3.getSource().setUrl("http://<?php echo Yii::app()->params['servidor'];?>/cgi-bin/mapserv.exe?MAP=c:\\datos/sigma/maps/sigma_3857.map&hiper="+idAlcampo);
			//iso4.getSource().setUrl("http://<?php echo Yii::app()->params['servidor'];?>/cgi-bin/mapserv.exe?MAP=c:\\datos/sigma/maps/sigma_3857.map&hiper="+idAlcampo);
			//iso5.getSource().setUrl("http://<?php echo Yii::app()->params['servidor'];?>/cgi-bin/mapserv.exe?MAP=c:\\datos/sigma/maps/sigma_3857.map&hiper="+idAlcampo);
			//sel.getSource().setUrl("http://<?php echo Yii::app()->params['servidor'];?>/cgi-bin/mapserv.exe?MAP=c:\\datos/sigma/maps/sigma_3857.map&hiper="+idAlcampo);
			
			
			//microcuencas_selected.getSource().setUrl("http://sit.plansierra.org/cgi-bin/mapserv.exe?MAP=c:\\datos/sierra/catastro.map&cuencas="+idAlcampo);
			//plantaciones_cuencas_selected.getSource().setUrl("http://sit.plansierra.org/cgi-bin/mapserv.exe?MAP=c:\\datos/sierra/especies.map&parcelassel="+idAlcampo);
			//parcelas.getSource().setUrl("http://sit.plansierra.org/cgi-bin/mapserv.exe?MAP=c:\\datos/sierra/catastro.map");
			
<?php

//AQUI RELLENO EL DESPLEGABLE DE MICROCUENCA; ESTE EVENTO SE DISPARA CUANDO YA HE SELECCIONADO UNA CUENA ?
			
		     $mbd = new PDO('pgsql:host=localhost;port=5432;dbname=jbsoft', 'postgres', 'postgres');

            $rs4 = array();
//ss_micro_cuencas tiene todas las microcuencas consideradas en SPSO y cada microcuenca tiene un ID diferente

             foreach($mbd->query('SELECT codigo_micro_cuenca, descripcion, codigo_cuenca FROM ss_micro_cuenca  order by codigo_micro_cuenca::int asc;') as $fila4) {
				 
				 
                   $c = null;								
                   $c['id'] =(int)$fila4['codigo_micro_cuenca'];
                   $c['nombre'] =$fila4['descripcion'];
				   $c['cuenca']= (int)$fila4['codigo_cuenca'];
                   array_push($rs4, $c);

              }


?>	
	     data = <?php echo json_encode($rs4);?>;
	     var a = "<option value=999>Todas las subcuencas</option>";
		 $("#microcuenca").append(a);
	     for(var i = 0; i < data.length; i++){
			 //solo escojo las microcuencas de la cuenca ya seleccionada
			if (data[i].cuenca == idAlcampo) {
		      $('#microcuenca').append($('<option>', {
				   value: data[i].id,
				   text: data[i].id+ '- '+ data[i].nombre + '  (' +data[i].cuenca+' )'+ idAlcampo
		     	}));
			}
	    }
	
			
			
	//fecha de la encuesta o año
	
			$('#idEncuesta').empty();
			$.get('index.php?r=tblIsoCv/getIsoFechas&idAlcampo='+idAlcampo, function(data2){
				
				/*ESTA PARTE ES PARA CENTRAR EL DMAPA. AHORA NO LO HACEMOS
				//***************************************************
				$.get('index.php?r=tblHiperAlcampo/getCoords&epsg=3857&id='+idAlcampo, function (d){
					map.getView().setCenter([parseFloat(d[0].x), parseFloat(d[0].y)]);
					map.getView().setZoom(10);
				});
				*/
				//***************************************************
				//
				//AQUI SE LLAMAN A LOS DOS GRAFICOS QUE INCLUYE LA PAGINA A 21-02-2019
				//
				//
				//***************************************************
				//cargarGrafico1(idAlcampo);
				
				//cargarGrafico1(data2[0].id_encuesta);
				cargarGrafico2(false);
				for(var i2 = 0; i2 < data2.length; i2++){
					var opt = $('<option/>', {
						//value: data2[i2].id_encuesta,
						value: data2[i2].fecha_encuesta,
						text: data2[i2].fecha_encuesta
					});
					
					//$('#zipCode').append(opt);
					opt.appendTo("#idEncuesta");
				}
					idEncuesta = $("#idEncuesta").val();
					$("#idEncuesta option:first").attr('selected','selected');
				 	$("#idEncuesta").selectmenu("refresh");		
					$("#idEncuesta").trigger("change");
				
				
		
	
			
			})
			
			
      }
	});
	
	$('#idEncuesta').selectmenu({
		change: function( event, data ) {
			idEncuesta = data.item.value;
			cargarGrafico1(data.item.value);
			//cargarGrafico1(idEncuesta);
			//iso1.getSource().setUrl("http://<?php echo Yii::app()->params['servidor'];?>/cgi-bin/mapserv.exe?MAP=c:\\datos/sigma/maps/sigma_3857.map&hiper="+idAlcampo);
			//iso2.getSource().setUrl("http://<?php echo Yii::app()->params['servidor'];?>/cgi-bin/mapserv.exe?MAP=c:\\datos/sigma/maps/sigma_3857.map&hiper="+idAlcampo);
			//iso3.getSource().setUrl("http://<?php echo Yii::app()->params['servidor'];?>/cgi-bin/mapserv.exe?MAP=c:\\datos/sigma/maps/sigma_3857.map&hiper="+idAlcampo);
			//iso4.getSource().setUrl("http://<?php echo Yii::app()->params['servidor'];?>/cgi-bin/mapserv.exe?MAP=c:\\datos/sigma/maps/sigma_3857.map&hiper="+idAlcampo);
			//iso5.getSource().setUrl("http://<?php echo Yii::app()->params['servidor'];?>/cgi-bin/mapserv.exe?MAP=c:\\datos/sigma/maps/sigma_3857.map&hiper="+idAlcampo);
			//sel.getSource().setUrl("http://<?php echo Yii::app()->params['servidor'];?>/cgi-bin/mapserv.exe?MAP=c:\\datos/sigma/maps/sigma_3857.map&hiper="+idAlcampo);
			
			
      }
	});
	
	$('#microcuenca').selectmenu({
		change: function( event, data ) {
			$( "#butUnselect" ).trigger('click');
			microcuenca = data.item.value;
			$('#grafico1').empty();
			$('#grafico2').empty();
			$('#seleccion').empty();
	
	//se pinta la microcuenca seleccionada
	        microcuencas_selected.getSource().setUrl("http://sit.plansierra.org/cgi-bin/mapserv.exe?MAP=c:\\datos/sierra/catastro.map&cuencas="+microcuenca);
	

	      }
	});
	
	
//***********************************************	
//RELLENAR COMBO DE CUENCA
//**********************************************
	
<?php
$rs3 = array();

?>

<?php

$rs3 = array();

?>

	//**********************************************
	//CARGAR MAPA epsg:25830
	//AQUI SE DEFINEN DIVERSAS CAPAS
	//
	//*************************************************
	
	
	
	//DEFINICION DEL SISTEMA DE PROYECCION UTILIZADO EN LA REPRESENTACION 
	//EPSG:3857 erts89 HUSO 30
	//OTROS POSIBLES
	//EPSG:4326 WGS84 GEOGRAFICA
	//EPSG:32619 WGS84 UTM ZONE 19N
	//EPSG:3857 WGS84 PSEUDO MERCATOR
	//OJO creo que no estan definidos en OpenLayers algunas proyecciones
	
	//*******************
	cargarGraficoAnoGanaderia();
	 cargarGraficoAnoReforestacion();

	 $('#grafico80_A').empty();

	
	


	var layers = [];
	

	
	

		
		
});

//-----------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------	
//-----------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------
//-----------------------------------------------------------------------------------------------



//****************************************
//
// FUNCIONES DE CARGA DE GRAFICOS.
//
//***********************************+


//DAtos de ganaderia

function cargarGraficoAnoGanaderia(){
	
		//plantaciones_ano_en_curso.getSource().setUrl("http://sit.plansierra.org/cgi-bin/mapserv.exe?MAP=c:\\datos/sierra/especies.map&ano=2018&doy=161");
		
	$('#grafico80').empty();
	
	var f = new Date();
    var dia =(f.getDate() + "-" + (f.getMonth() +1) + "-" + f.getFullYear());
	
	
	//$("#grafico80").append("</td>   <td ><h3><b>Fecha de hoy : " +dia+ ",  datos desde el 1 de Enero (ATENCION datos de 2018)	</b></h3></td> " );
	//$("#grafico80_A").html('<img id="loading-image" width=200 src="images/logo3_75_75.gif" alt="Loading..." />');
	//$("#grafico80_A").html('<img id="loading-image" width=200 src="images/logo3_75_75.gif" alt="Loading..." />');
	
	$("#graficoT80").html('<img  id="loading-image2" width=64 src="images/ganaderia.png" alt="Loading..."/>' );
		$('#graficoS90').empty();
		$('#graficoS91').empty();
		$('#graficoS92').empty();
		$('#graficoS93').empty();
		$('#graficoS93').empty();
		$('#graficoS100').empty();
		$('#graficoS101').empty();
		$('#graficoS102').empty();
		$('#graficoS103').empty();
		$('#graficoS104').empty();
		
		$("#graficoS101").html('<img id="loading-image" width=80 src="images/logo3_75_75.gif" alt="Loading..." />');
		$("#graficoS91").html('<img id="loading-image" width=80 src="images/logo3_75_75.gif" alt="Loading..." />');
	  $('#pobEdad0').empty();
		$('#pobEdad1').empty();
		$('#pobEdad2').empty();
		$('#pobEdad3').empty();
		$('#pobEdad4').empty();
		$('#Titulo0').empty();
		$('#Titulo1').empty();
		$('#Titulo2').empty();
		$('#Titulo3').empty();
		$('#Titulo4').empty();
		$('#grafico2').empty();
		$('#grafico21').empty();
		$('#grafico22').empty();
		$('#infoTablaCorta').empty();
	    $('#infoTablaLarga').empty();
     	$('#infoTablaLarga2').empty();
    	$('#infoTablaLarga3').empty();
		
       var id2 = parseInt($("#ano").val());


//(((((((((((((((((((((((((((((((((((((((((((((((((((((((())))))))))))))))))))))))))))))))))))))))))))))))))))))))
//(((((((((((((((((((((((((((((((((((((((((((((((((((((((())))))))))))))))))))))))))))))))))))))))))))))))))))))))

//LUVIA IGUAL EN TOODOS

	$.get('index.php?r=Meteoro/GetMesAnoMedio', function (data){
	$.get('index.php?r=Meteoro/GetMesAnoActual', function (data1){
	
	//data = JSON.parse(data);
	data = JSON.parse(data);			
	data1 = JSON.parse(data1);
	
$('#graficoS101').empty();	
$('#graficoS101').highcharts({

        chart: {
				type: 'spline',
				zoomType: 'xy'
			},
			title: {
				text: 'Lluvia mensual mm (ultimos 12 meses)'
			},
			subtitle: {
				text: 'Estación de SAJOMA'
			},
			xAxis: {
				title: {
					enabled: true,
					text: 'mes'
				},
				startOnTick: true,
				endOnTick: false,
				showLastLabel: true,
				gridLineWidth: 2,
				min:0,
				max:12
			},
			yAxis: [{
				title: {
					text: 'mm de agua'
				
				},
				min: 0,
				max: 1000
			}],
			legend: {
				layout: 'horizontal',
				align: 'left',
				verticalAlign: 'top',
				x: 80,
				y: 80,
				floating: true,
				backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF',
				borderWidth: 1
			},
			tooltip: {
						valueDecimals: 0,
						 crosshairs: true,
						shared: true
					
					},
			plotOptions: {
				scatter: {
					marker: {
						radius: 2,
						states: {
							hover: {
								enabled: true,
								lineColor: 'rgb(100,100,100)'
							}
						}
					},
					states: {
						hover: {
							marker: {
								enabled: false
							}
						}
					}
					
					 
				}
			},
			series: [ {
				name: 'Ultimos 12 meses',
				yAxis:0,
				color: 'rgba(255, 32, 32, 1)',
				data: data1

				}, {
				name: 'Máxima.',
				yAxis:0,
				color: 'rgba(22, 230, 83, 0.4)',
				data: data.segundo

				},
			{
				name: ' Promedio',
				yAxis:0,
				color: 'rgba(22, 83, 83, 0.4)',
				data: data.primero,

			},   {
				name: 'Minima',
				yAxis:0,
				color: 'rgba(22, 83, 230, 0.4)',
				data: data.tercero

				}
				
				
				
				],
		});
       
	});
	
	});
	
	
	
	
	

	
//grafico de tarta de actividades en ganaderia

$.get('index.php?r=PoaGanaderia/GetTotalCategorias', function (data100){
	//$.get('index.php?r=Graficos/GetAno&id='+id2, function (data){
	
	data100 = JSON.parse(data100);
	//alert('sali');
 //alert ('GetPS');
 
	$('#graficoS100').highcharts({
	colors: ['#ff000099','#bb000099', '#99000066', '#990033', '#990099','#9900ff', '#999900', '#996600','#993300', '#993333'],
   
  chart: {
    plotBackgroundColor: null,
    plotBorderWidth: 'white',
    plotShadow: true,
	
	height:450,
    type: 'pie'
  },
  legend: {
        align: 'left',
        verticalAlign: 'top',
        layout: 'horizontal',
		 itemWidth: 150,
        x: 0,
        y: 0
    },
  
  
  title: {
    text: 'Actividades en %'
  },
  tooltip: {
    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
  },
  plotOptions: {
    pie: {
      allowPointSelect: true,
      cursor: 'pointer',
	  showInLegend: true,
      dataLabels: {
        enabled: true,
        format: '{point.percentage:.1f} %',
		
        style: {
          color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
        },
					showInLegend: true
		
      }
    }
  },
  series: [{
	  name: '% de actividades',
    data: 	data100
  }]
  
 
});


	

		


})
	
	
	
	
	
	//GRAFI
	
	
	$.get('index.php?r=PoaGanaderia/GetCumplido', function (data1){
	;
	data1 = JSON.parse(data1);	


	
	
	obje=(data1[data1.length-1].plantas);
	obje1=parseFloat(obje.toFixed(2));
	
	
	
	
	$('#graficoS90').empty();


$('#graficoS90').highcharts({
	
	
chart: {
        type: 'solidgauge'
    },

    title: {
		text: 'Cumplimiento mensual (prev. vs ejec.)'
		
	},

    pane: {
        center: ['50%', '60%'],
        size: '100%',
        startAngle: -90,
        endAngle: 90,
        background: {
            backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#fff',
            innerRadius: '60%',
            outerRadius: '100%',
            shape: 'arc'
        }
    },

    tooltip: {
        enabled: true
    }, 
	exporting: {
        enabled: false
    },

    // the value axis
    yAxis: {
        stops: [
		[0.0, '#ff000099'],
            [0.6, '#ff000099'], // red
            [0.75, '#ff660099'], // yellow
			  [0.85, '#66ff0099'],
            [0.97, '#00ff0099'] // red
        ],
        lineWidth: 0,
       
       
		 min: 0,
        max: 125,
        title: {
            text: 'Objetivo %'
        }
       
    },
	xAxis: {
        
		 min: 0,
        max: 130
        
       
    },

    plotOptions: {
        solidgauge: {
            dataLabels: {
                y: 5,
                borderWidth: 0,
                useHTML: true
            }
        }
    },
	
    credits: {
        enabled: false
    },
	
   
    series: [{
        name: '%',
        data: [obje1],
        dataLabels: {
            format: '<div style="text-align:center"><span style="font-size:25px;color:' +
                ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}</span><br/>' +
                   '<span style="font-size:12px;color:silver">%</span></div>'
        },
        tooltip: {
            valueSuffix: ' tareas'
        }
    }],	
	

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
});

		
		
	})
	
	
	//grafico por parametro ganadero
	
	
	$.get('index.php?r=PoaGanaderia/GetCategorias', function (data){
	
	$.get('index.php?r=Poa/GetPlantadas', function (data1){
	data = JSON.parse(data);
	categorias=[];
	serie1=[];
	serie2=[];
	for (i=0; i<data.length; i++){
		categorias.push(data[i].plantas);
		serie1.push(data[i].anual);
		serie2.push(data[i].mensual);
		
		
	}
	data1 = JSON.parse(data1);	
	
$('#graficoS91').empty();
	
$('#graficoS91').highcharts({

    chart: {
        type: 'bar'
    },
    title: {
        text: 'Cumplimiento de objetivos'
    },
    
    xAxis: {
        categories: categorias,
		 labels:{
			 style:{
				 color: '#000000',
				 fontSize: '12px'
			 },
		 },
        title: {
           text: '',
			 style: {
				  color: '#0000ff99',
                fontSize: '12px'
            }
        },
		
    },
    yAxis: {
        min: 0,
        title: {
            text: '% sobre previsto',
            align: 'high',
			  style: {
				  color: '#0000ff99',
                fontSize: '18px'
            }
			
        },
		
        labels: {
            overflow: 'justify'
        }
    },
    tooltip: {
        valueSuffix: ' %'
    },
    plotOptions: {
        bar: {
            dataLabels: {
                enabled: false
            }
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'top',
        x: -40,
        y: 80,
        floating: true,
        borderWidth: 1,
        backgroundColor: ((Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'),
        shadow: true
    },
    credits: {
        enabled: false
    },
    series: [{
        name: 'Anual',
        data: serie1,
		color: '#ff000099'
    }, {
        name: 'Mensual',
        data: serie2,
		color: '#aa003399'
    }]
		});
       

		})
	})
	
	
	
	
	
	grupo0='Captación';
	$.get("index.php?r=PoaGanaderia/GetRealizado&grupo= '"+grupo0+"'", function (data3){
	
	data3 = JSON.parse(data3);	
	var totalSup = 0;
	var totalNum = 0;
	var row = $("<tr />");
	var i = 0;
	var c = 0, s =0;
	
		$("#TituloS92").append("<td>" +grupo0 + "</td>" );
	
	 var row = $("<tr />");
		$("#graficoS92").append(row); 
		row.append($("<th></th>"));
		row.append($("<td width=80%><h4><b>"+grupo0+" (unidad)</b></h5></td>"));
		
		row.append($("<td width=20%><h4><b>Valor</b></h5></td>"));
			var row = $("<tr />")	
			$("#graficoS92").append(row); 
			
		var totalsup=0;
		
		for (var i=0; i < data3.length; i++){
			
			
			$("#graficoS92").append(row); 
			//alert (actividad01.toLocaleString('de-DE'));
		    
			row.append($("<td>" +  "</td>"));
			
			row.append($("<td><h5>" + data3[i].tipo.toLocaleString('en-EN') + "</td>"));
		
			row.append($("<td><h4>" + data3[i].plantas.toLocaleString('en-EN', {maximumFractionDigits:0}) + "</td>"));
			var row = $("<tr />");
			
			$("#graficoS92").append(row); 
		
		}
		
	
	})
	
	grupo1='Fomento';
	$.get("index.php?r=PoaGanaderia/GetRealizado&grupo= '"+grupo1+"'", function (data3){
	
	data3 = JSON.parse(data3);	
	var totalSup = 0;
	var totalNum = 0;
	var row = $("<tr />");
	var i = 0;
	var c = 0, s =0;
	
		$("#TituloS93").append("<td>" +grupo1 + "</td>" );
	
	 var row = $("<tr />");
		$("#graficoS93").append(row); 
		row.append($("<th></th>"));
		row.append($("<td width=80%><h4><b>"+grupo1+" (unidad)</b></h5></td>"));
		
		row.append($("<td width=20%><h4><b>Valor</b></h5></td>"));
			var row = $("<tr />")	
			$("#graficoS93").append(row); 
			
		var totalsup=0;
		
		for (var i=0; i < data3.length; i++){
			
			
			$("#graficoS93").append(row); 
			//alert (actividad01.toLocaleString('de-DE'));
		    
			row.append($("<td>" +  "</td>"));
			
			row.append($("<td><h5>" + data3[i].tipo.toLocaleString('en-EN') + "</td>"));
		
			row.append($("<td><h4>" + data3[i].plantas.toLocaleString('en-EN', {maximumFractionDigits:0}) + "</td>"));
			var row = $("<tr />");
			
			$("#graficoS93").append(row); 
		
		}
		
	
	})
	
	grupo2='Construcciones';
	$.get("index.php?r=PoaGanaderia/GetRealizado&grupo= '"+grupo2+"'", function (data3){
	
	data3 = JSON.parse(data3);	
	var totalSup = 0;
	var totalNum = 0;
	var row = $("<tr />");
	var i = 0;
	var c = 0, s =0;
	
		$("#TituloS94").append("<td>" +grupo2 + "</td>" );
	
	 var row = $("<tr />");
		$("#graficoS94").append(row); 
		row.append($("<th></th>"));
		row.append($("<td width=80%><h4><b>"+grupo2+" (unidad)</b></h5></td>"));
		
		row.append($("<td width=20%><h4><b>Valor</b></h5></td>"));
			var row = $("<tr />")	
			$("#graficoS94").append(row); 
			
		var totalsup=0;
		
		for (var i=0; i < data3.length; i++){
			
			
			$("#graficoS94").append(row); 
			//alert (actividad01.toLocaleString('de-DE'));
		    
			row.append($("<td>" +  "</td>"));
			
			row.append($("<td><h5>" + data3[i].tipo.toLocaleString('en-EN') + "</td>"));
		
			row.append($("<td><h4>" + data3[i].plantas.toLocaleString('en-EN', {maximumFractionDigits:0}) + "</td>"));
			var row = $("<tr />");
			
			$("#graficoS94").append(row); 
		
		}
		
	
	})
	
	
	grupo3='Sanidad y genética';
	$.get("index.php?r=PoaGanaderia/GetRealizado&grupo= '"+grupo3+"'", function (data3){
	
	data3 = JSON.parse(data3);	
	var totalSup = 0;
	var totalNum = 0;
	var row = $("<tr />");
	var i = 0;
	var c = 0, s =0;
	
		$("#TituloS103").append("<td>" +grupo3 + "</td>" );
	
	 var row = $("<tr />");
		$("#graficoS103").append(row); 
		row.append($("<th></th>"));
		row.append($("<td width=80%><h4><b>"+grupo3+" (unidad)</b></h5></td>"));
		
		row.append($("<td width=20%><h4><b>Valor</b></h5></td>"));
			var row = $("<tr />")	
			$("#graficoS103").append(row); 
			
		var totalsup=0;
		
		for (var i=0; i < data3.length; i++){
			
			
			$("#graficoS103").append(row); 
			//alert (actividad01.toLocaleString('de-DE'));
		    
			row.append($("<td>" +  "</td>"));
			
			row.append($("<td><h5>" + data3[i].tipo.toLocaleString('en-EN') + "</td>"));
		
			row.append($("<td><h4>" + data3[i].plantas.toLocaleString('en-EN', {maximumFractionDigits:0}) + "</td>"));
			var row = $("<tr />");
			
			$("#graficoS103").append(row); 
		
		}
		
	
	})
	
	//por proyecto
	
	grupo4='Capacitación';
	$.get("index.php?r=PoaGanaderia/GetRealizado&grupo= '"+grupo4+"'", function (data3){
	
	data3 = JSON.parse(data3);	
	var totalSup = 0;
	var totalNum = 0;
	var row = $("<tr />");
	var i = 0;
	var c = 0, s =0;
	
		$("#TituloS104").append("<td>" +grupo4 + "</td>" );
	
	 var row = $("<tr />");
		$("#graficoS104").append(row); 
		row.append($("<th></th>"));
		row.append($("<td width=80%><h4><b>"+grupo4+" (unidad)</b></h5></td>"));
		
		row.append($("<td width=20%><h4><b>Valor</b></h5></td>"));
			var row = $("<tr />")	
			$("#graficoS104").append(row); 
			
		var totalsup=0;
		
		for (var i=0; i < data3.length; i++){
			
			
			$("#graficoS104").append(row); 
			//alert (actividad01.toLocaleString('de-DE'));
		    
			row.append($("<td>" +  "</td>"));
			
			row.append($("<td><h5>" + data3[i].tipo.toLocaleString('en-EN') + "</td>"));
		
			row.append($("<td><h4>" + data3[i].plantas.toLocaleString('en-EN', {maximumFractionDigits:0}) + "</td>"));
			var row = $("<tr />");
			
			$("#graficoS104").append(row); 
		
		}
		
	
	})
	


	

//fin tercero


// AQUI SE ACABA function cargarGraficoAnoGanaderia()	
}
	
	

function cargarGraficoAnoReforestacion(){
	
		//plantaciones_ano_en_curso.getSource().setUrl("http://sit.plansierra.org/cgi-bin/mapserv.exe?MAP=c:\\datos/sierra/especies.map&ano=2018&doy=161");
		
	$('#grafico80').empty();
	
	var f = new Date();
    var dia =(f.getDate() + "-" + (f.getMonth() +1) + "-" + f.getFullYear());
	
	
	$("#grafico80").append("</td>   <td ><h3><b>Fecha de hoy : " +dia+ ",  datos desde el 1 de Enero (ATENCION datos de 2018)	</b></h3></td> " );
	$("#grafico80_A").html('<img id="loading-image" width=200 src="images/logo3_75_75.gif" alt="Loading..." />');
	//$("#graficoS80").append("</td>   <td ><h3><b>Reforestación	</b></h3></td> " );
	$("#graficoS80").html('<img  id="loading-image2" width=64 src="images/reforestacion.png" alt="Loading..."/>' );
		$('#grafico90').empty();
		$('#grafico91').empty();
		$('#grafico92').empty();
		$('#grafico93').empty();
		$('#grafico93').empty();
		$('#grafico100').empty();
		$('#grafico101').empty();
		$('#grafico102').empty();
		$('#grafico103').empty();
		$('#grafico104').empty();
		
		$("#grafico101").html('<img id="loading-image" width=80 src="images/logo3_75_75.gif" alt="Loading..." />');
		$("#grafico91").html('<img id="loading-image" width=80 src="images/logo3_75_75.gif" alt="Loading..." />');
	  $('#pobEdad0').empty();
		$('#pobEdad1').empty();
		$('#pobEdad2').empty();
		$('#pobEdad3').empty();
		$('#pobEdad4').empty();
		$('#Titulo0').empty();
		$('#Titulo1').empty();
		$('#Titulo2').empty();
		$('#Titulo3').empty();
		$('#Titulo4').empty();
		$('#grafico2').empty();
		$('#grafico21').empty();
		$('#grafico22').empty();
		$('#infoTablaCorta').empty();
	    $('#infoTablaLarga').empty();
     	$('#infoTablaLarga2').empty();
    	$('#infoTablaLarga3').empty();
		
       var id2 = parseInt($("#ano").val());
//Cuenca
//alert ('cuenca'+idAlcampo);
//microcuenca
//alert ('microcuenca'+microcuenca);
//año
//alert ('año'+id2);

//(((((((((((((((((((((((((((((((((((((((((((((((((((((((())))))))))))))))))))))))))))))))))))))))))))))))))))))))
//(((((((((((((((((((((((((((((((((((((((((((((((((((((((())))))))))))))))))))))))))))))))))))))))))))))))))))))))

	$.get('index.php?r=Meteoro/GetMesAnoMedio', function (data){
	$.get('index.php?r=Meteoro/GetMesAnoActual', function (data1){
	
	//data = JSON.parse(data);
	data = JSON.parse(data);			
	data1 = JSON.parse(data1);
	
$('#grafico101').empty();	
$('#grafico101').highcharts({

        chart: {
				type: 'spline',
				zoomType: 'xy'
			},
			title: {
				text: 'Lluvia mensual mm (ultimos 12 meses)'
			},
			subtitle: {
				text: 'Estación de SAJOMA'
			},
			xAxis: {
				title: {
					enabled: true,
					text: 'mes'
				},
				startOnTick: true,
				endOnTick: false,
				showLastLabel: true,
				gridLineWidth: 2,
				min:0,
				max:12
			},
			yAxis: [{
				title: {
					text: 'mm de agua'
				
				},
				min: 0,
				max: 1000
			}],
			legend: {
				layout: 'horizontal',
				align: 'left',
				verticalAlign: 'top',
				x: 80,
				y: 80,
				floating: true,
				backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF',
				borderWidth: 1
			},
			tooltip: {
						valueDecimals: 0,
						 crosshairs: true,
						shared: true
					
					},
			plotOptions: {
				scatter: {
					marker: {
						radius: 2,
						states: {
							hover: {
								enabled: true,
								lineColor: 'rgb(100,100,100)'
							}
						}
					},
					states: {
						hover: {
							marker: {
								enabled: false
							}
						}
					}
					
					 
				}
			},
			series: [ {
				name: 'Ultimos 12 meses',
				yAxis:0,
				color: 'rgba(255, 32, 32, 1)',
				data: data1

				}, {
				name: 'Máxima.',
				yAxis:0,
				color: 'rgba(22, 230, 83, 0.4)',
				data: data.segundo

				},
			{
				name: ' Promedio',
				yAxis:0,
				color: 'rgba(22, 83, 83, 0.4)',
				data: data.primero,

			},   {
				name: 'Minima',
				yAxis:0,
				color: 'rgba(22, 83, 230, 0.4)',
				data: data.tercero

				}
				
				
				
				],
		});
       
	});
	
	});
	
	
	
	
	
	
	
	$.get('index.php?r=Poa/GetTecnico', function (data){

	data = JSON.parse(data);			
	
	
$('#grafico100').highcharts({

    title: {
        text: 'Supervisiones por técnico'
    },

    

    yAxis: {
        title: {
            text: 'Supervisiones'
        }
    },
	xAxis: {
        title: {
            text: 'Numero de técnico (relativo)'
        }
    },
    legend: {
        layout: 'vertical',
        align: 'right',
        verticalAlign: 'middle'
    },

    plotOptions: {
        series: {
            label: {
                connectorAllowed: false
            },
            pointStart: 0
        }
    },

    series: [{
        name: 'Supervisiones por técnico',
		color: 'rgba(255, 30, 30, 1)',
        data: data
    }],

    responsive: {
        rules: [{
            condition: {
                maxWidth: 500
            },
            chartOptions: {
                legend: {
                    layout: 'horizontal',
                    align: 'center',
                    verticalAlign: 'bottom'
                }
            }
        }]
    }

})
	})	
	
	
	
	
	
	
	
	
	$.get('index.php?r=Poa/GetPoa2', function (data){
	$.get('index.php?r=Poa/GetPlantadas2', function (data1){
	data = JSON.parse(data);
	data1 = JSON.parse(data1);	


	
	
	obje=((data1[data1.length-1].b/data[data1.length-1].b)*100);
	obje1=parseFloat(obje.toFixed(1));
	
	
	
	
	$('#grafico90').empty();


$('#grafico90').highcharts({
	/*	  yAxis: {
        gridLineWidth: 0
    },
    plotOptions: {
        series: {
            pointPadding: 0.25,
            borderWidth: 0,
            color: '#600',
            targetOptions: {
                width: '10%'
            }
        }
    },
    credits: {
        enabled: false
    },
    exporting: {
        enabled: false
    },
   
 chart: { 
  inverted: true,
        type: 'bullet',
        marginTop: 40
    },
    title: {
        text: 'Tareas %'
    },
    xAxis: {
        //categories: ['<span class="hc-cat-title"></span><br/>U.S. $ (1,000s)']
    },
    yAxis: {
        plotBands: [{
            from: 0,
            to: 80,
            color: '#daa'
        }, {
            from: 80,
            to: 120,
            color: '#ecc'
        }, {
            from: 120,
            to: 140,
            color: '#f88'
        }],
        title: null
    },
    series: [{
        data: [{
            y: obje,
            target: 100
        }]
    }],
    tooltip: {
        pointFormat: '<b>{point.y}</b> (with target at {point.target})'
    }
*/
	
chart: {
        type: 'solidgauge'
    },

    title: {
		text: 'Cumplimiento (realizado vs previsto)'
	},

    pane: {
        center: ['50%', '60%'],
        size: '100%',
        startAngle: -90,
        endAngle: 90,
        background: {
            backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || '#fff',
            innerRadius: '60%',
            outerRadius: '100%',
            shape: 'arc'
        }
    },

    tooltip: {
        enabled: true
    }, 
	exporting: {
        enabled: false
    },

    // the value axis
    yAxis: {
        stops: [
		[0.0, '#ff000099'],
            [0.7, '#ff000099'], // greenDF5353
            [0.75, '#ffff0099'], // yellow
			  [0.85, '#66ff0099'],
            [0.97, '#00ff0099'] // red
        ],
        lineWidth: 0,
       
       
		 min: 0,
        max: 125,
        title: {
            text: 'Objetivo %'
        }
       
    },
	xAxis: {
        
		 min: 0,
        max: 130
        
       
    },

    plotOptions: {
        solidgauge: {
            dataLabels: {
                y: 5,
                borderWidth: 0,
                useHTML: true
            }
        }
    },
	
    credits: {
        enabled: false
    },
	
   
    series: [{
        name: '%',
        data: [obje1],
        dataLabels: {
            format: '<div style="text-align:center"><span style="font-size:25px;color:' +
                ((Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black') + '">{y}</span><br/>' +
                   '<span style="font-size:12px;color:silver">%</span></div>'
        },
        tooltip: {
            valueSuffix: ' tareas'
        }
    }],	
	

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
});

		
		
	})
	})
	
	$.get('index.php?r=Poa/GetPoa', function (data){
	
	$.get('index.php?r=Poa/GetPlantadas', function (data1){
	data = JSON.parse(data);
	data1 = JSON.parse(data1);	
	
$('#grafico91').empty();
	
$('#grafico91').highcharts({

        chart: {
				type: 'spline',
				zoomType: 'xy'
			},
			title: {
				text: 'Tareas plantadas'
			},
			subtitle: {
				text: 'Calendario no valido'
			},
			xAxis: {
				title: {
					enabled: true,
					text: 'Mes'
				},
				startOnTick: true,
				endOnTick: true,
				showLastLabel: true,
				gridLineWidth: 2,
				min:1,
				max:12
			},
			yAxis: [{
				title: {
					text: 'Tareas'
				
				},
				min: 0,
				max: 40000
			}],
			legend: {
				layout: 'vertical',
				align: 'left',
				verticalAlign: 'top',
				x: 80,
				y: 80,
				floating: true,
				backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF',
				borderWidth: 1
			},
			plotOptions: {
				scatter: {
					marker: {
						radius: 2,
						states: {
							hover: {
								enabled: true,
								lineColor: 'rgb(100,100,100)'
							}
						}
					},
					states: {
						hover: {
							marker: {
								enabled: false
							}
						}
					},
					tooltip: {
						valueDecimals: 0,
						headerFormat: '<b>{series.name}</b><br>',
						pointFormat: 'mes {point.x} , {point.y:} Tareas%'
						
						
					}
					
				}
			},
			series: [{
				name: 'Previstas',
				yAxis:0,
				color: 'rgba(23, 223, 83, 0.5)',
				data: data
				
				
				

			},  {
				name: 'Reales',
				yAxis:0,
				color: 'rgba(222, 23, 83, 1)',
				data: data1

	
	
				}
				
				
				],
		});
       
	
		})
	})
	
	
	$.get('index.php?r=Poa/GetActividad', function (data3){
	data3 = JSON.parse(data3);	
	var totalSup = 0;
	var totalNum = 0;
	var row = $("<tr />");
	var i = 0;
	var c = 0, s =0;
	
		$("#Titulo92").append("<td>" +" Tipo Actividad" + "</td>" );
	$('#grafico92').empty();
	 var row = $("<tr />");
		$("#grafico92").append(row); 
		row.append($("<th></th>"));
		row.append($("<td width=80%><h4><b>Actividad</b></h5></td>"));
		
		row.append($("<td width=20%><h4><b>Número</b></h5></td>"));
			var row = $("<tr />")	
			$("#grafico92").append(row); 
			
		var totalsup=0;
		for (var i=0; i < data3.length; i++){
			
			
			$("#grafico92").append(row); 
			//alert (actividad01.toLocaleString('de-DE'));
		    
			row.append($("<td>" +  "</td>"));
			
			row.append($("<td><h5>" + data3[i].tipo.toLocaleString('en-EN') + "</td>"));
		
			row.append($("<td><h4>" + data3[i].plantas.toLocaleString('en-EN', {maximumFractionDigits:0}) + "</td>"));
			var row = $("<tr />");
			
			$("#grafico92").append(row); 
		
		}
		
	
	})
	$.get('index.php?r=Poa/GetPlantacion', function (data3){
	data3 = JSON.parse(data3);	
	var totalSup = 0;
	var totalNum = 0;
	var row = $("<tr />");
	var i = 0;
	var c = 0, s =0;
	
		$("#Titulo93").append("<td>" +"Tipo Plantacion" + "</td>" );
	
	 var row = $("<tr />");
		$("#grafico93").append(row); 
		row.append($("<th></th>"));
		row.append($("<td width=80%><h4><b>Plantación</b></h5></td>"));
		
		row.append($("<td width=20%><h4><b>Número</b></h5></td>"));
			var row = $("<tr />")	
			$("#grafico93").append(row); 
			
		var totalsup=0;
		for (var i=0; i < data3.length; i++){
			
			
			$("#grafico93").append(row); 
			//alert (actividad01.toLocaleString('de-DE'));
		    
			row.append($("<td>" +  "</td>"));
			
			row.append($("<td><h5>" + data3[i].tipo.toLocaleString('en-EN') + "</td>"));
		
			row.append($("<td><h4>" + data3[i].plantas.toLocaleString('en-EN', {maximumFractionDigits:0}) + "</td>"));
			var row = $("<tr />");
			
			$("#grafico93").append(row); 
		
		}
		
	
	})
	$.get('index.php?r=Poa/GetEspecie', function (data3){
	data3 = JSON.parse(data3);	
	var totalSup = 0;
	var totalNum = 0;
	var row = $("<tr />");
	var i = 0;
	var c = 0, s =0;
	
		$("#Titulo94").append("<td>" +"Grupo de especie" + "</td>" );
	
	 var row = $("<tr />");
		$("#grafico94").append(row); 
		row.append($("<th></th>"));
		row.append($("<td width=80%><h4><b>Grupo</b></h5></td>"));
		
		row.append($("<td width=20%><h4><b>Plantas</b></h5></td>"));
			var row = $("<tr />")	
			$("#grafico94").append(row); 
			
		var totalsup=0;
		for (var i=0; i < data3.length; i++){
			
			
			$("#grafico94").append(row); 
			//alert (actividad01.toLocaleString('de-DE'));
		    
			row.append($("<td>" +  "</td>"));
			
			row.append($("<td><h5>" + data3[i].tipo.toLocaleString('en-EN') + "</td>"));
		
			row.append($("<td><h4>" + data3[i].plantas.toLocaleString('en-EN', {maximumFractionDigits:0}) + "</td>"));
			var row = $("<tr />");
			
			$("#grafico94").append(row); 
		
		}
		
	
	})
	
	$.get('index.php?r=Poa/GetMunicipio', function (data3){
	data3 = JSON.parse(data3);	
	var totalSup = 0;
	var totalNum = 0;
	var row = $("<tr />");
	var i = 0;
	var c = 0, s =0;
	
		$("#Titulo102").append("<td>" +" Municipios" + "</td>" );
	
	    var row = $("<tr />");
		$("#grafico102").append(row); 
		row.append($("<th></th>"));
		row.append($("<td width=80%><h4><b>Municipio</b></h5></td>"));
		
		row.append($("<td width=20%><h4><b>Número</b></h5></td>"));
			var row = $("<tr />")	
			$("#grafico102").append(row); 
			
		var totalsup=0;
		for (var i=0; i < data3.length; i++){
			
			
			$("#grafico102").append(row); 
			//alert (actividad01.toLocaleString('de-DE'));
		    
			row.append($("<td>" +  "</td>"));
			
			row.append($("<td><h5>" + data3[i].tipo.toLocaleString('en-EN') + "</td>"));
		
			row.append($("<td><h4>" + data3[i].plantas.toLocaleString('en-EN', {maximumFractionDigits:0}) + "</td>"));
			var row = $("<tr />");
			
			$("#grafico102").append(row); 
		
		}
		
	
	})
	
	$.get('index.php?r=Poa/GetCuenca', function (data3){
	data3 = JSON.parse(data3);	
	var totalSup = 0;
	var totalNum = 0;
	var row = $("<tr />");
	var i = 0;
	var c = 0, s =0;
	
		$("#Titulo103").append("<td>" +" Cuenca" + "</td>" );
	
	 var row = $("<tr />");
		$("#grafico103").append(row); 
		row.append($("<th></th>"));
		row.append($("<td width=80%><h4><b>Cuenca</b></h5></td>"));
		
		row.append($("<td width=20%><h4><b>Número</b></h5></td>"));
			var row = $("<tr />")	
			$("#grafico103").append(row); 
			
		var totalsup=0;
		for (var i=0; i < data3.length; i++){
			
			
			$("#grafico103").append(row); 
			//alert (actividad01.toLocaleString('de-DE'));
		    
			row.append($("<td>" +  "</td>"));
			
			row.append($("<td><h5>" + data3[i].tipo.toLocaleString('en-EN') + "</td>"));
		
			row.append($("<td><h4>" + data3[i].plantas.toLocaleString('en-EN', {maximumFractionDigits:0}) + "</td>"));
			var row = $("<tr />");
			
			$("#grafico103").append(row); 
		
		}
		
	
	})
	
	//por proyecto
	
	$.get('index.php?r=Poa/GetProyecto', function (data3){
	data3 = JSON.parse(data3);	
	var totalSup = 0;
	var totalNum = 0;
	var row = $("<tr />");
	var i = 0;
	var c = 0, s =0;
	
		$("#Titulo104").append("<td>" +"Proyectos" + "</td>" );
	
	 var row = $("<tr />");
		$("#grafico104").append(row); 
		row.append($("<th></th>"));
		row.append($("<td width=80%><h4><b>Cuenca</b></h5></td>"));
		
		row.append($("<td width=20%><h4><b>Número</b></h5></td>"));
			var row = $("<tr />")	
			$("#grafico104").append(row); 
			
		var totalsup=0;
		for (var i=0; i < data3.length; i++){
			
			
			$("#grafico104").append(row); 
			//alert (actividad01.toLocaleString('de-DE'));
		    
			row.append($("<td>" +  "</td>"));
			
			row.append($("<td><h5>" + data3[i].tipo.toLocaleString('en-EN') + "</td>"));
		
			row.append($("<td><h4>" + data3[i].plantas.toLocaleString('en-EN', {maximumFractionDigits:0}) + "</td>"));
			var row = $("<tr />");
			
			$("#grafico104").append(row); 
		
		}
		
	
	})
	


$.get('index.php?r=Graficos/GetPSanoex', function (data1){
	dataano = JSON.parse(data1);	
	//alert ('GetPSanoex')	;
  
});

$.get('index.php?r=Graficos/GetPSEspecies', function (data2){
	dataespecie = JSON.parse(data2);
	//alert ('PSEspecies')	;
});


$.get('index.php?r=Graficos/GetPSAnoEspecies', function (data){
	
	data = JSON.parse(data);
	
    var datos=[];

	
	for (l=0;l<dataespecie.length;l++) {
		var datosespecie=[]	;
	for (j=0; j<dataano.length; j++){
		
	datosespecie[j]=0;
	//bucle recorriendo la base de datos especies,año, microcuenca
	for(var i=0; i < data.length; i++){
		if (data[i].especie==dataespecie[l].especie && data[i].ano==dataano[j].ano ) { 
					
				datosespecie[j]=[data[i].cantidad];
				//alert (datosespecie+ '  año  '+data[i].ano+'    especie '+data[i].especie + '  cantida '+data[i].cantidad);
		}
	}
		
	}
	
	 var dato=[];
	
	var dato={
						name:dataespecie[l].especie,
						data:datosespecie,
						
					}
					//alert ( +data[i].ano+'    '+data[i].especie+'    '+data[i].cantidad);
					
					
					datos.push(dato);
					
				
	}
					

	



//cuarto



//quinto





//fin de quinto

})

//septimo
$.get('index.php?r=Graficos/GetPSsubanoex', function (data1){
	dataanocu = JSON.parse(data1);	
	
  
});

$.get('index.php?r=Graficos/GetPSsubcuencas', function (data2){
	datacuenca = JSON.parse(data2);
	
});
	
$.get('index.php?r=Graficos/GetPSsubAnoCuencas', function (data){
	//$.get('index.php?r=Graficos/GetAno&id='+id2, function (data){
	//var data=[];
	
	
	datax = JSON.parse(data);
	//alert('sali');
	//alert (datax[0].ano)	;
	//alert (datax[0].cuenca)	;
	//alert (datax[0].cantidad)	;
	  //alert ('año minimo  '+dataano[0].ano + '  Especie mas frecuente  '+dataespecie[0].especie);
	
	//alert('sali');
	
    var datos=[];
	
//bucle para todas las especies

//bucle para todos los años

   //alert (dataespecie.length);
   //alert (dataano.length);
	//alert ('ano long       '+dataanocu.length);
	//alert ('cuencas long   '+datacuenca.length);
	for (l=0;l<datacuenca.length;l++) {
		var datoscuenca=[]	;
		//alert ('ano long       '+dataanocu.length);
	    //alert ('cuencas long   '+datacuenca.length);
	  for (j=0; j<dataanocu.length; j++){
		 //alert (l+'   '+j);
		 //alert ('ano long     n  '+dataanocu.length);
	     //alert ('cuencas long  n '+datacuenca.length);
	    
	//bucle recorriendo la base de datos especies,año, microcuenca
	     //alert ('datx long  n '+datax.length);
	     for( i=0; i < datax.length; i++){
			 /*alert ('ano long     i  '+dataanocu.length);
	         alert ('cuencas long  i '+datacuenca.length);
			 alert (datax[i].cuenca);
			 alert (datacuenca[l].cuenca);
			 alert (datax[i].ano);
			 alert (dataanocu[j].ano);*/
		     if (datax[i].cuenca==datacuenca[l].cuenca && datax[i].ano==dataanocu[j].ano ) { 		
				 datoscuenca[j]=[datax[i].cantidad];
				//alert (datosespecie+ '  año  '+data[i].ano+'    especie '+data[i].especie + '  cantida '+data[i].cantidad);
		     }
	     }
	   }
	//alert (datosespecie);
	//alert (datosespecie[4]);
	 var dato=[];
	var dato={
						name:datacuenca[l].cuenca,
						data:datoscuenca,	
					}
					//alert ( +data[i].ano+'    '+data[i].especie+'    '+data[i].cantidad);
					datos.push(dato);			
	}
 //alert ('ano long  FIN     '+dataanocu.length);
 //alert ('cuencas long  FIN '+datacuenca.length);					
 //alert (datos);

//quinto





//fin de quinto

})

	

//fin tercero


	
}






</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
 
  ga('create', 'UA-64660106-1', 'auto');
  ga('send', 'pageview');
 
</script>